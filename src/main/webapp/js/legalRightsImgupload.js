var IsCheckFlag = true; //标示是否是勾选复选框选中行的，true - 是 , false - 否var flag = true;$("#fpp").datagrid({  url: rootPath + 'v1/rights/getAllRightsImagePage?' + Math.random(),  method: 'post',  rownumbers: true,  tok:'list',  tov:'total',  columns: [[    {      field: 'ossUrl', title: '图片', width: '370', align: 'center',      formatter: function (value, row, index) {        if(row.width < 368 && row.height< 150){          return '<div style="height: 150px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle;"><img src="' + value + '"/></div></div>';        }else if (row.width / row.height * 150 > 370) {          return '<div style="height: 150px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle;"><img src="' + value + '" width="368"/></div></div>';        } else {          return '<div style="height: 150px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle;"><img src="' + value + '" height="150"/></div></div>';        }      }    },    {      field: 'name', title: '名称', width: '400', align: 'center'    },    {      field: 'op', title: '操作', width: '130', align: 'center', formatter: function (value, row, index) {      return '<a class="btn detail-btn0719" href="javascript:;" onclick="function_all.img_edit(\'' + row.ossUrl + '\',\'' + row.name + '\',\'' + row.id + '\',\'' + row.width + '\',\'' + row.height + '\');">编辑</a><a class="btn cancel-btn0719" style="display:inline-block" onclick = "function_all.deleteR(' + row.id + ')">删除</a>';    }    }  ]],  pagination:true,  onClickCell: function (rowIndex, field, value) {    IsCheckFlag = false;  },  onSelect: function (rowIndex, rowData) {    if (!IsCheckFlag) {      IsCheckFlag = true;      $("#fpp").datagrid("unselectRow", rowIndex);    }  },  onUnselect: function (rowIndex, rowData) {    if (!IsCheckFlag) {      IsCheckFlag = true;      $("#fpp").datagrid("selectRow", rowIndex);    }  }});/*$("#w").window({  onBeforeOpen: function () {    $("#sel").combobox({      url: rootPath + "v1/product/getFoboProduct",      method: "get",      editable: false,      valueField: 'productId',      textField: 'productName'    });  }});*/var function_all = {  deleteR: function (id) {    $.messager.confirm('提示', '确定删除么？', function (r) {      if (r) {        $.ajax({          url: rootPath + 'v1/rights/deleteImage',          data: {"id": id},          method: "post",          success: function (json) {            $("#fpp").datagrid('reload');          }        })      }    });  },  imgup: function (id) {    $("#" + id).submit();    Common.loading_mask();    var obj = document.getElementById(id);    obj.outerHTML = obj.outerHTML;  },  img_fn: function (imgId) {    var ossUrl = $("input[name='ossUrl']").val();    var width = $("input[name='width']").val();    var height = $("input[name='height']").val();    var name = $('#imgTitle').val();    var url, data;    url = rootPath + 'v1/rights/updateImage';    data = {      id: imgId,      ossUrl: ossUrl,      name: name,      width:width,      height: height    }    if (ossUrl == "") {      $.messager.alert('提示', '提交失败', 'error');      return false;    }    this.imgAjax(url, data);  },  imgAjax: function (url, data) {    if (flag) {      flag = false;      $.ajax({        url: url,        method: "post",        data: data,        success: function (json) {          flag = true;          $("#fpp").datagrid('reload');          $('#w').window('close');          $("#show_img").remove();          $("input[name='ossUrl']").val("");          $("input[name='width']").val("");          $("input[name='height']").val("");        }      });    }  },  img_edit: function (imgUrl, imgName, imgId, imgW, imgH) {    $("#show_img").remove();    if(imgW<660 && imgH<200){      $("#w").prepend('<div id="show_img" style="height: 200px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle"><img src="' + imgUrl + '"/></div></div>');    } else if(imgW/imgH*200>660){      $("#w").prepend('<div id="show_img" style="height: 200px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle"><img src="' + imgUrl + '" width="660"/></div></div>');    }else{      $("#w").prepend('<div id="show_img" style="height: 200px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle"><img src="' + imgUrl + '" height="200"/></div></div>');    }    $("#imgTitle").val(imgName);    $("input[name='ossUrl']").val(imgUrl);    $("input[name='width']").val(imgW);    $("input[name='height']").val(imgH);    $('#w').window('open');    $("#img_edit_btn").unbind("click");    $("#img_edit_btn").bind("click", function () {      function_all.img_fn(imgId);    });  },  img_add: function (id) {    $("#" + id).submit();    Common.loading_mask();    var obj = document.getElementById(id);    obj.outerHTML = obj.outerHTML;  },}function uploadPic(obj) {  $('#load').remove();  $("#show_img").remove();  if(imgW/imgH*200>660){    $("#w").prepend('<div id="show_img" style="height: 200px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle"><img src="' + obj.urlPic + '"  width="660"/></div></div>');  }else{    $("#w").prepend('<div id="show_img" style="height: 200px; display: table; text-align: center; width: 100%;"><div style="display: table-cell; vertical-align: middle"><img src="' + obj.urlPic + '"  height="200"/></div></div>');  }  $("input[name='ossUrl']").val(obj.urlPic);  $("input[name='width']").val(obj.width);  $("input[name='height']").val(obj.height);  $("#imgTitle").val(obj.name);}function uploadPicBatch (obj) {  $('#load').remove();  location.reload();}